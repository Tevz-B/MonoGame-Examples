    @implementation ImmediateVsDeffered void initialize()
    {
        sortMode = SpriteSortModeImmediate;
        maxItems = 4000;
        base.initialize();
    }

    void UpdateWithGameTime(GameTime gameTime)
    {
        TouchCollection touches = TouchPanel.GetInstance().GetState();
        foreach (TouchLocation touch in touches)
        {
            if (touch.State == TouchLocationStatePressed)
            {
                if (sortMode == SpriteSortModeImmediate)
                {
                    sortMode = SpriteSortModeDeffered;
                    Console.WriteLine("Switching to deffered mode.");
                }
                else if (sortMode == SpriteSortModeDeffered)
                {
                    sortMode = SpriteSortModeImmediate;
                    Console.WriteLine("Switching to immediate mode.");
                }

            }

        }
        base.UpdateWithGameTime(gameTime);
    }

    void DrawWithGameTime(GameTime gameTime)
    {
        base.DrawWithGameTime(gameTime);
        spriteBatch.BeginWithSortModeBlendState(sortMode, null);
        foreach (Item item in scene)
        {
            spriteBatch.DrawToFromRectangleTintWithColor(sprites256[0], item.Position, rectangle16[item.RectangleIndex % 12], item.Color);
        }
        spriteBatch.End();
    }

    @end